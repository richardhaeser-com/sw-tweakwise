{% sw_extends '@Storefront/storefront/page/product-detail/meta.html.twig' %}

{% block layout_head_canonical %}
    {{ parent() }}

    {% if page.extensions.twConfiguration.eventTagEnabled and page.extensions.twConfiguration.crossSellProductId  %}
<script>
    (async () => {
        window.tweakwiseLayer = window.tweakwiseLayer || [];

        const profileKey = await window.tweakwise.getProfileKey();
        const tweakwiseProductId = '{{ page.extensions.twConfiguration.crossSellProductId }}'

        window.tweakwiseLayer.push({
            event: 'productView',
            data: {
                profileKey: profileKey,
                productKey: tweakwiseProductId
            }
        });
    })();
</script>
    {% endif %}
{% endblock %}